esphome:
  name: proflame2-fireplace

esp32:
  board: denky32
  framework:
    type: arduino

external_components:
  - source:
      type: local
      path: ./components
    components: [proflame2]

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  ap:
    ssid: "ProFlame2-Fallback"
    password: !secret ap_password

logger:
  level: DEBUG

api:
  encryption:
    key: !secret api_encryption_key

spi:
  clk_pin: GPIO18
  miso_pin: GPIO19
  mosi_pin: GPIO23

proflame2:
  id: my_fireplace
  cs_pin: GPIO27
  gdo0_pin: GPIO25
  serial_number: 0xAA9802

  power:
    name: "Fireplace Power"
    icon: "mdi:fireplace"

  pilot:
    name: "Fireplace Pilot Mode"
    icon: "mdi:fire"
    entity_category: config

  aux:
    name: "Fireplace Aux Power"
    icon: "mdi:power-plug"

  flame:
    name: "Fireplace Flame Height"
    icon: "mdi:fire"
    mode: slider

  fan:
    name: "Fireplace Fan Speed"
    icon: "mdi:fan"
    mode: slider
  
  secondary_flame:
    name: "Fireplace Secondary Flame"
    icon: "mdi:fire"

sensor:
  - platform: wifi_signal
    name: "Fireplace WiFi Signal"
    update_interval: 60s
  - platform: uptime
    name: "Fireplace Uptime"

binary_sensor:
  - platform: status
    name: "Fireplace Connection Status"

button:
  - platform: restart
    name: "Fireplace Controller Restart"
    icon: "mdi:restart"

text_sensor:
  - platform: version
    name: "Fireplace ESPHome Version"
  - platform: wifi_info
    ip_address:
      name: "Fireplace IP Address"
    ssid:
      name: "Fireplace Connected SSID"

web_server:
  port: 80
  auth:
    username: admin
    password: !secret web_password

time:
  - platform: homeassistant
    id: homeassistant_time


